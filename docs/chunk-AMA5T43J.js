import{a as g,b as C,c as k,d as y,e as E}from"./chunk-HSHNZ4LK.js";import{Ba as w,K as d,La as x,Q as l,Qa as m,Ra as i,Sa as h,bb as c,db as v,ga as p,jb as b,lb as P,sa as u}from"./chunk-C5PROWOY.js";function N(t){if(!t?.power?.values)return[];let r=5,o=3600,n=0;return t.power.values.map(e=>{let a=k(e.value)*1e3*(r/o);return!isNaN(a)&&a!==null&&(n=a),{time:e.time,kWh:isNaN(a)?n:a}})}function f(t){return t.map(r=>({time:r.time,value:r.kWh}))}var s=class t{weather=l(g);clock=l(P);currentPowerKWh=p(null);minuteAverages=p([]);constructor(){b(()=>{let r=this.weather.powerData(),o=this.clock.currentTime();if(!r?.values)return;let n=N({power:{values:r}});if(!n.length)return;let e=C(f(n));e!==null&&!isNaN(e)&&this.currentPowerKWh.set(e),this.minuteAverages.set(y(f(n)))})}static \u0275fac=function(o){return new(o||t)};static \u0275prov=d({token:t,factory:t.\u0275fac,providedIn:"root"})};var W=class t{power=l(s);static \u0275fac=function(o){return new(o||t)};static \u0275cmp=w({type:t,selectors:[["power"]],decls:13,vars:4,consts:[[1,"relative","z-10","flex","flex-col","items-center","gap-8","w-full","max-w-[900px]","mx-auto","px-6","py-10","bg-[radial-gradient(ellipse_at_center,rgba(255,255,255,0.9)_0%,rgba(255,255,255,0.6)_60%,rgba(255,255,255,0.3)_100%)]","backdrop-blur-md","rounded-2xl","shadow-lg","border","border-white/20"],[1,"text-2xl","font-semibold","text-black","mb-3","justify-center","text-center"],[1,"flex","flex-col","md:flex-row","items-center","gap-8","w-full"],[1,"flex","flex-col","items-center","text-center","w-full","md:w-1/4","mb-6","md:mb-0"],[1,"text-xl","font-semibold","mb-2"],[1,"text-2xl","font-bold","text-power"],[1,"w-full","md:w-3/4"],[1,"text-lg","font-semibold","text-gray-800","justify-center","text-center","mb-3","md:mb-0"],["color","#7C3AED","unit","kWh",3,"data","width","height"]],template:function(o,n){if(o&1&&(m(0,"div",0)(1,"h2",1),c(2,"Power"),i(),m(3,"div",2)(4,"div",3)(5,"h2",4),c(6,"Current"),i(),m(7,"p",5),c(8),i()(),m(9,"div",6)(10,"h2",7),c(11,"Average power"),i(),h(12,"line-chart",8),i()()()),o&2){let e;u(8),v(" ",(e=(e=n.power.currentPowerKWh())==null?null:e.toFixed(2))!==null&&e!==void 0?e:"\u2014"," kWh "),u(4),x("data",n.power.minuteAverages())("width",700)("height",300)}},dependencies:[E],encapsulation:2})};export{W as a};
