import{a as b,b as C,c as k,d as E,e as N}from"./chunk-OQUTWCQP.js";import{Fa as h,K as d,Ka as m,La as i,Ma as x,P as l,Xa as c,Za as g,db as v,eb as P,fa as p,pa as u,xa as w}from"./chunk-REY5ENJQ.js";function W(t){if(!t?.power?.values)return[];let r=5,n=3600,o=0;return t.power.values.map(e=>{let a=k(e.value)*1e3*(r/n);return!isNaN(a)&&a!==null&&(o=a),{time:e.time,kWh:isNaN(a)?o:a}})}function f(t){return t.map(r=>({time:r.time,value:r.kWh}))}var s=class t{weather=l(b);clock=l(P);currentPowerKWh=p(null);minuteAverages=p([]);constructor(){v(()=>{let r=this.weather.powerData(),n=this.clock.currentTime();if(!r?.values)return;let o=W({power:{values:r}});if(!o.length)return;let e=C(f(o));e!==null&&!isNaN(e)&&this.currentPowerKWh.set(e),this.minuteAverages.set(E(f(o)))})}static \u0275fac=function(n){return new(n||t)};static \u0275prov=d({token:t,factory:t.\u0275fac,providedIn:"root"})};var y=class t{power=l(s);static \u0275fac=function(n){return new(n||t)};static \u0275cmp=w({type:t,selectors:[["power"]],decls:13,vars:4,consts:[[1,"relative","z-10","flex","flex-col","items-center","gap-8","w-[900px]","max-w-full","mx-auto","p-10","bg-[radial-gradient(ellipse_at_center,rgba(255,255,255,0.95)_0%,rgba(255,255,255,0.7)_60%,rgba(255,255,255,0.4)_100%)]","backdrop-blur-lg","rounded-lg","shadow-xl"],[1,"text-2xl","font-semibold","text-black","mb-3","justify-center","text-center"],[1,"flex","items-center","gap-8"],[1,"flex","flex-col","items-center","w-1/4","text-center"],[1,"text-xl","font-semibold","mb-2"],[1,"text-2xl","font-bold","text-power"],[1,"w-3/4"],[1,"text-lg","font-semibold","text-gray-800","justify-center","text-center"],["color","#7C3AED","unit","kWh",3,"data","width","height"]],template:function(n,o){if(n&1&&(m(0,"div",0)(1,"h2",1),c(2,"Power"),i(),m(3,"div",2)(4,"div",3)(5,"h2",4),c(6,"Current"),i(),m(7,"p",5),c(8),i()(),m(9,"div",6)(10,"h2",7),c(11,"Average power"),i(),x(12,"line-chart",8),i()()()),n&2){let e;u(8),g(" ",(e=(e=o.power.currentPowerKWh())==null?null:e.toFixed(2))!==null&&e!==void 0?e:"\u2014"," kWh "),u(4),h("data",o.power.minuteAverages())("width",700)("height",300)}},dependencies:[N],encapsulation:2})};export{y as a};
